# =============================================================================
# Project makefile
# =============================================================================

# Settings
objs = main.obj init.obj utils.obj vec.obj ray.obj renderer.obj gui.obj
testobjs = init.obj test.obj utils.obj vec.obj ray.obj renderer.obj gui.obj
dest = raytracer.exe

# =============================================================================
# Do NOT edit this section, unless you know what you are doing.
# =============================================================================
.asm.obj
  tasm /ml /m2 /w2 /z /zi /p /jIDEAL $<

$(dest): $(objs)
#  wlink option quiet system pmodew name $@ file {$(objs)}
  wlink option quiet system pmodew name $@ file *.obj

tests: $(testobjs) .symbolic
  wlink option quiet system pmodew name tests.exe file *.obj

clean: .symbolic
  del *.obj
  del tests.exe
  del $(dest)

.silent
debug: $(objs) .symbolic
  wlink debug watcom lines option Q,C system pmodew name $(dest) file *.obj
  wd /tr=rsi /li=43 $(dest)

.silent
debugtests: $(testobjs) .symbolic
  wlink debug watcom lines option Q,C system pmodew name tests.exe file *.obj
  wd /tr=rsi /li=43 tests.exe